<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Robot - Detailed View</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="detailed-view-styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Detailed Stock Analysis</h1>
            <p id="stockTitle">Loading stock data...</p>
        </div>

        <a href="index.html" class="back-button">‚Üê Back to Main</a>

        <div class="interval-tabs">
            <button class="tab-button active" data-tab="daily" id="daily-tab-btn" onclick="switchTab('daily')">üìà Daily Interval</button>
            <button class="tab-button" data-tab="intraday" id="intraday-tab-btn" onclick="switchTab('intraday')">‚ö° 30-Minute Interval</button>
            <button class="tab-button" data-tab="chatgpt" id="chatgpt-tab-btn" onclick="switchTab('chatgpt')">ü§ñ AI Analysis</button>
        </div>

        <!-- Daily Interval Tab -->
        <div id="daily-tab" class="tab-content active">
            <div class="detailed-card">
                <div id="daily-loading" class="loading-spinner">
                    <div class="spinner"></div>
                </div>
                <div id="daily-content" style="display: none;">
                    <div class="stock-header">
                        <div>
                            <div class="stock-symbol" id="daily-symbol">LOADING</div>
                            <div id="daily-source-info"></div>
                        </div>
                        <div>
                            <div class="stock-price" id="daily-price">$0.00</div>
                            <div id="daily-change"></div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="daily-chart"></canvas>
                    </div>

                    <div class="indicators-grid">
                        <div class="indicator-box">
                            <div class="indicator-label">RSI (14)</div>
                            <div class="indicator-value" id="daily-rsi">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">MACD</div>
                            <div class="indicator-value" id="daily-macd">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">SMA 20</div>
                            <div class="indicator-value" id="daily-sma20">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">SMA 50</div>
                            <div class="indicator-value" id="daily-sma50">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">Volume</div>
                            <div class="indicator-value" id="daily-volume">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">High/Low</div>
                            <div class="indicator-value" id="daily-range">-</div>
                        </div>
                    </div>

                    <div class="signal" id="daily-signal">HOLD - 50% confidence</div>

                    <div class="analysis-section">
                        <h3>üìä Daily Analysis</h3>
                        <div id="daily-analysis"></div>
                    </div>
                </div>
                <div id="daily-error" class="error-message" style="display: none;"></div>
            </div>
        </div>

        <!-- 30-Minute Interval Tab -->
        <div id="intraday-tab" class="tab-content">
            <div class="detailed-card">
                <div id="intraday-loading" class="loading-spinner">
                    <div class="spinner"></div>
                </div>
                <div id="intraday-content" style="display: none;">
                    <div class="stock-header">
                        <div>
                            <div class="stock-symbol" id="intraday-symbol">LOADING</div>
                            <div id="intraday-source-info"></div>
                        </div>
                        <div>
                            <div class="stock-price" id="intraday-price">$0.00</div>
                            <div id="intraday-change"></div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="intraday-chart"></canvas>
                    </div>

                    <div class="indicators-grid">
                        <div class="indicator-box">
                            <div class="indicator-label">RSI (14)</div>
                            <div class="indicator-value" id="intraday-rsi">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">MACD</div>
                            <div class="indicator-value" id="intraday-macd">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">SMA 20</div>
                            <div class="indicator-value" id="intraday-sma20">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">SMA 50</div>
                            <div class="indicator-value" id="intraday-sma50">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">Avg Volume</div>
                            <div class="indicator-value" id="intraday-volume">-</div>
                        </div>
                        <div class="indicator-box">
                            <div class="indicator-label">30min Range</div>
                            <div class="indicator-value" id="intraday-range">-</div>
                        </div>
                    </div>

                    <div class="signal" id="intraday-signal">HOLD - 50% confidence</div>

                    <div class="analysis-section">
                        <h3>‚ö° 30-Minute Intraday Analysis</h3>
                        <div id="intraday-analysis"></div>
                    </div>
                </div>
                <div id="intraday-error" class="error-message" style="display: none;"></div>
            </div>
        </div>

        <!-- ChatGPT AI Analysis Tab -->
        <div id="chatgpt-tab" class="tab-content">
            <div class="detailed-card">
                <div class="chatgpt-section">
                    <div class="chatgpt-header">
                        <h3>ü§ñ AI-Powered Technical Analysis</h3>
                        <p>Advanced analysis combining daily and 30-minute interval data for comprehensive trading insights</p>
                    </div>

                    <div class="chatgpt-controls">
                        <button class="btn btn-primary" id="generateAnalysisBtn">
                            üß† Generate AI Analysis
                        </button>
                        <div id="analysis-status" class="analysis-status hidden"></div>
                    </div>

                    <div class="analysis-container">
                        <div id="chatgpt-prompt" class="prompt-section" style="display: none;">
                            <h4>üìã Analysis Prompt:</h4>
                            <div class="prompt-text" id="prompt-content"></div>
                        </div>

                        <div id="chatgpt-response" class="response-section" style="display: none;">
                            <h4>üéØ AI Analysis Results:</h4>
                            <div class="response-text" id="response-content"></div>
                        </div>

                        <div id="chatgpt-placeholder" class="placeholder-section">
                            <div class="placeholder-content">
                                <h4>ü§ñ AI Analysis Features</h4>
                                <div class="feature-list">
                                    <div class="ai-feature">
                                        <strong>üìä Multi-Timeframe Analysis:</strong>
                                        <p>Combines both daily and 30-minute interval technical data for comprehensive insights</p>
                                    </div>
                                    <div class="ai-feature">
                                        <strong>üéØ Trading Strategy Focus:</strong>
                                        <p>Provides specific recommendations for short-term (intraday), 3-day, and 5-day trading horizons</p>
                                    </div>
                                    <div class="ai-feature">
                                        <strong>üìà Trend Identification:</strong>
                                        <p>Analyzes primary upward/downward trends and current market sentiment</p>
                                    </div>
                                    <div class="ai-feature">
                                        <strong>‚ö° Real-Time Integration:</strong>
                                        <p>Uses current technical indicators from both daily and intraday data sources</p>
                                    </div>
                                </div>
                                <div class="getting-started">
                                    <p><strong>To get started:</strong> Load data in the Daily and 30-Minute tabs first, then click "Generate AI Analysis" to create a comprehensive trading analysis.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="detailed-view.js"></script>
</body>
</html>